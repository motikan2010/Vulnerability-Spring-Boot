package com.example.vuln.service;

import org.springframework.stereotype.Service;
import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import java.io.StringReader;

@Service
public class XmlService {

    public String parseXml(String data) throws Exception {
        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();

        // ▼ 修正範囲 ▼
        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
        Document doc = docBuilder.parse(new InputSource(new StringReader(data)));
        NodeList RegistrationNo = doc.getElementsByTagName("name");
        String result = RegistrationNo.item(0).getFirstChild().getNodeValue();
        // ▲ ここまで ▲

        return result;
    }

}
